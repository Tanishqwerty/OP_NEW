# Coolify Environment Variables Setup Guide

## Required Environment Variables for Laravel Deployment

Configure these environment variables in your Coolify project settings:

### 🗄️ Database Configuration
```bash
DB_CONNECTION=mysql
DB_HOST=your-database-host        # Provided by Coolify database service
DB_PORT=3306                      # Default MySQL port
DB_DATABASE=your-database-name    # Your database name
DB_USERNAME=your-database-user    # Database username
DB_PASSWORD=your-database-password # Database password
```

### 🌐 Application Configuration
```bash
APP_NAME="Laravel Order Processing"
APP_ENV=production
APP_DEBUG=false
APP_URL=https://your-domain.com   # Your actual Coolify domain
```

### 📧 Mail Configuration (Optional)
```bash
MAIL_MAILER=smtp
MAIL_HOST=your-smtp-host
MAIL_PORT=587
MAIL_USERNAME=your-email@domain.com
MAIL_PASSWORD=your-email-password
MAIL_ENCRYPTION=tls
MAIL_FROM_ADDRESS=noreply@yourdomain.com
MAIL_FROM_NAME="${APP_NAME}"
```

### 🔐 Security (Auto-generated)
```bash
# APP_KEY will be auto-generated by the container
# No need to set this manually
```

## 📋 How to Set These in Coolify

1. **Go to your Coolify project**
2. **Navigate to "Environment Variables" tab**
3. **Add each variable:**
   - Name: `DB_HOST`
   - Value: `your-database-host`
   - Click "Add"

4. **For database connection in Coolify:**
   - Create a database service first
   - Coolify will provide the connection details
   - Use the internal service name for `DB_HOST`

## 🚀 Example Coolify Database Setup

If you're using Coolify's built-in database:

```bash
DB_HOST=mysql                     # Internal service name
DB_PORT=3306
DB_DATABASE=laravel_app
DB_USERNAME=laravel_user
DB_PASSWORD=secure_random_password
```

## ✅ Verification

After deployment, check the logs to ensure:
1. ✅ Environment variables are loaded correctly
2. ✅ Database connection is successful
3. ✅ Application key is generated
4. ✅ Laravel optimizations complete

## 🔧 Troubleshooting

### If you see "getaddrinfo for ${DB_HOST failed":
- ✅ **FIXED**: Updated Dockerfile handles runtime environment substitution
- Environment variables are now properly resolved at container startup

### Common Issues:
1. **Database connection fails**: Check DB_HOST points to correct service
2. **APP_KEY errors**: Will auto-generate on first startup
3. **Permission errors**: Container handles permissions automatically

## 📝 Notes

- Environment variables are processed at **runtime** (container start)
- Database connection uses Docker internal networking
- APP_KEY is generated automatically if not provided
- All Laravel optimizations run automatically 